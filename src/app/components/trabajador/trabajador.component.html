<div class="container">
    <h2>Editar Datos del Trabajador</h2>
    <form (submit)="actualizarDatosTrabajador()">
      <div class="form-group">
        <label for="habilidades">Habilidades</label>
        <input type="text" class="form-control" id="habilidades" [(ngModel)]="habilidades" name="habilidades" required>
      </div>
      <div class="form-group">
        <label for="disponible">Disponible</label>
        <select class="form-control" id="disponible" [(ngModel)]="disponible" name="disponible" required>
          <option [value]="true">SÃ­</option>
          <option [value]="false">No</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">Actualizar Datos</button>
    </form>
  
    <h2>Buscar Chambas</h2>
    <input type="text" class="form-control" placeholder="Buscar chambas" [(ngModel)]="busqueda" (input)="filtrarChambas()">
  
    <h2>Chambas Disponibles</h2>
    <ul class="list-group">
      <li *ngFor="let chamba of chambasFiltradas" class="list-group-item">
        <h3>{{ chamba.titulo }}</h3>
        <p><strong>Empleador:</strong>{{ chamba.empleador_nombre }} {{ chamba.empleador_apellido }}</p>
        <p>{{ chamba.descripcion }}</p>
        <p><strong>Inicio:</strong> {{ chamba.fecha_inicio }}</p>
        <p><strong>Fin:</strong> {{ chamba.fecha_fin }}</p>
        <form (submit)="enviarMensaje(chamba.empleador_usuario_id)">
          <div class="form-group">
            <label for="mensaje">Mensaje</label>
            <textarea class="form-control" id="mensaje" [(ngModel)]="mensaje" name="mensaje" required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Enviar Mensaje</button>
        </form>
      </li>
    </ul>
  
    <h2>Mensajes</h2>
    <div *ngFor="let empleadorId of empleadores">
      <details>
        <summary>Mensajes con el empleador {{ empleadoresInfo[empleadorId]?.nombre }} {{ empleadoresInfo[empleadorId]?.apellido }}</summary>
        <div class="mensajes">
          <h3>Recibidos</h3>
          <ul class="list-group">
            <li *ngFor="let mensaje of mensajes[empleadorId]?.mensajes_enviados" class="list-group-item mensaje-enviado">
              <p>{{ mensaje.mensaje }}</p>
            </li>
          </ul>
          <h3>Enviados</h3>
          <ul class="list-group">
            <li *ngFor="let mensaje of mensajes[empleadorId]?.mensajes_recibidos" class="list-group-item mensaje-recibido">
              <p>{{ mensaje.mensaje }}</p>
            </li>
          </ul>
        </div>
      </details>
    </div>
  </div>
  